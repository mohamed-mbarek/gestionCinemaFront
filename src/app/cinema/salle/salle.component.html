
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">


<app-header></app-header>


<div class="app">
    <h3>&nbsp;&nbsp; Liste de Cinemas</h3>
    <app-list-cinema *ngFor="let cinemaEl of cinemas" [cinema]="cinemaEl" (cinemaSelected)="onCinemaSelected(cinemaEl)"></app-list-cinema>
</div>
<div class="col-lg-5 "  id="a55" >
    <div *ngIf="!select" class="table user-list">
    <h3>Liste de salles</h3>
        <div class="form-group">
            <div class="form-inline">
                <div class="input-group cher">
                    <input  (ngModelChange)="searchSalle(key.value)" #key="ngModel" ngModel type="text"
                        class="form-control" placeholder="Nom salle ..." aria-label="Username"
                        aria-describedby="basic-addon1">
                    <div class="input-group-append">
                        <button class="btn btn-success" type="button" (click)="ngOnInit()">
                            <i class="fa fa-refresh" aria-hidden="true"></i>

                        </button>
                    </div>
                </div>


            </div>
        </div>
</div>

    <table  *ngIf="!select" class="table user-list">
        <thead>
            <tr> 
            <th><span>Salle</span></th>
            <th><span>Capacite</span></th>
            
            <th>&nbsp;</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let salle of salles">
                <td>
                    <img src="https://information.tv5monde.com/sites/info.tv5monde.com/files/assets/images/Sallecinema.jpg" alt="">
                    <a  class="user-link"><b>{{salle?.nom}}</b> </a>
                </td>
                <td>{{salle?.nombrePlace}}</td>
                    
                
                <td style="width: 20%;">
                    <a   (click)="onOpenModal(salle,'edit')" class="table-link text-info">
                        <span class="fa-stack">
                            <i class="fa fa-square fa-stack-2x"></i>
                            <i class="fa fa-pencil fa-stack-1x fa-inverse"></i>
                        </span>
                    </a>
                    <a   (click)="onOpenModal(salle,'delete')" class="table-link danger">
                        <span class="fa-stack">
                            <i class="fa fa-square fa-stack-2x"></i>
                            <i class="fa fa-trash-o fa-stack-1x fa-inverse"></i>
                        </span>
                    </a>
                </td>
            </tr>
            
        </tbody>
    </table>
<div *ngIf="select && res >0">
    <h4> Liste de salles par {{cinema.nom}}</h4>
</div>

    <div class="main-box no-header clearfix xx" *ngIf="select && res >0" >
                <div class="main-box-body clearfix">
                    <div   class="table-responsive">
                        <button *ngIf="compare(res+1,nbSalle) " type="button" (click)="onOpenModal(null,'add')" class="btn btn-primary bu22"
                        data-toggle="modal" data-target="#exampleModal">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-plus-lg" viewBox="0 0 16 16">
                            <path
                                d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z" />
                        </svg>
                        Ajouter
                    </button>
                        
                    <table class="table user-list">
                            <thead>
                                <tr> 
                                <th><span>Salle</span></th>
                                <th><span>Capacite</span></th>
                                
                                <th>&nbsp;</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let salle of listSalleByCinema">
                                    <td>
                                        <img src="https://information.tv5monde.com/sites/info.tv5monde.com/files/assets/images/Sallecinema.jpg" alt="">
                                        <a  class="user-link">{{salle?.nom}}</a>
                                    </td>
                                    <td>{{salle?.nombrePlace}}</td>
                                        
                                    
                                    <td style="width: 20%;">
                                        <a   (click)="onOpenModal(salle,'edit')" class="table-link text-info">
                                            <span class="fa-stack">
                                                <i class="fa fa-square fa-stack-2x"></i>
                                                <i class="fa fa-pencil fa-stack-1x fa-inverse"></i>
                                            </span>
                                        </a>
                                        <a   (click)="onOpenModal(salle,'delete')" class="table-link danger">
                                            <span class="fa-stack">
                                                <i class="fa fa-square fa-stack-2x"></i>
                                                <i class="fa fa-trash-o fa-stack-1x fa-inverse"></i>
                                            </span>
                                        </a>
                                    </td>
                                </tr>
                                
                            </tbody>
                        </table>
                    </div>
                </div>
          
</div>
            <!-- Notification de 0 select -->


            <div *ngIf="res==0" class="col-lg-12 col-md-8 col-xl-8 bbbb">
                <div class="alert alert-danger" role="alert">
                    <h5 class="alert-heading">Aucune salle  trouver !</h5>
                </div>
                <button *ngIf="compare(res+1,nbSalle) " type="button" (click)="onOpenModal(null,'add')" class="btn btn-primary bu22"
                data-toggle="modal" data-target="#exampleModal">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-plus-lg" viewBox="0 0 16 16">
                    <path
                        d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z" />
                </svg>
                Ajouter
            </button>
                
            </div>

                   </div>
<!-- *********************************** Add SALLE   *************************************  -->

<div class="modal fade" id="addSalleModel" tabindex="-1" role="dialog" aria-labelledby="addEmployeeModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header" >
            <h4 class="modal-title" id="addEmployeeModalLabel">Ajouter Une Salle</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            <form #addForm="ngForm" (ngSubmit)="onAddSalle(addForm)" >
                <div class="form-row">
                <div class="form-group col-md-6">
               <label for="name">Nom</label>
               <input type="text"  ngModel name="nom" class="form-control" id="name" placeholder="Salle 1.." required>
            </div>
          
            <div class="form-group col-md-3">
                <label for="exampleFormControlTextarea1">Capacite</label>
                <input type="number"   ngModel  name="nombrePlace" class="form-control" id="nb" pattern="[1-9]{2}" placeholder="11.." required>
            </div>

            </div>
            <div class="modal-footer">
               <button type="button" id="add-salle-form" class="btn btn-danger" data-dismiss="modal">Annuler</button>
               <button [disabled]="addForm.invalid" (click)="ngOnInit()" type="submit" class="btn btn-primary" >Envoyer</button>
            </div>
            
            </form>
         </div>
      </div>
    </div>
    </div>

<!-- ***********************************  Update Salle   *************************************  -->

<div class="modal fade" id="updateSalleModel" tabindex="-1" role="dialog" aria-labelledby="addEmployeeModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header" >
            <h4 class="modal-title" id="addEmployeeModalLabel">Modifier Une Salle</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            <form #editForm="ngForm" >
                <div class="form-row">
                <div class="form-group col-md-6">
               <label for="name">Nom</label>
               <input type="text"  ngModel={{editSalle?.nom}} name="nom" class="form-control" id="name" placeholder="Azerty.." required>
            </div>
          
            <div class="form-group col-md-1">
                <input type="hidden"  ngModel={{editSalle?.id}} name="id" class="form-control" id="idcinema" placeholder="Azerty.." >
            </div>
  
            <div class="form-group col-md-3">
                <label for="exampleFormControlTextarea1">Capacite</label>
                <input type="number"   ngModel={{editSalle?.nombrePlace}}  name="nombrePlace" class="form-control" id="nb" pattern="[1-9]{2}" placeholder="11.." required>
            </div>

            </div>
            <div class="modal-footer">
               <button type="button" id="edit-salle-form" class="btn btn-danger" data-dismiss="modal">Annuler</button>
               <button [disabled]="editForm.invalid" (click)="onUpdateSalle(editForm)"  class="btn btn-primary" >Envoyer</button>
            </div>
            
            </form>
         </div>
      </div>
    </div>
    </div>





    <!-- Delete Modal -->
    <div class="modal fade" id="deleteSalleModal" tabindex="-1" role="dialog" aria-labelledby="deleteModelLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteModelLabel">Effacer Cinema  <b class="b">{{deleteSalle?.nom}}</b> </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Etes-vous sûr que vous voulez supprimer cette Cinema  "
                    </p>
                    <div class="modal-footer">
                        <button type="button" id="delete-form" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
                        <button (click)="onDeleteSalle(deleteSalle?.id)" class="btn btn-danger"
                            data-dismiss="modal">Effacer</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

                <!-- Notification de 0 recherche -->

               <div  *ngIf="salles?.length === 0 && !cinema " class="col-lg-12 col-md-8 col-xl-8 azerty">
                <div class="alert alert-danger" role="alert">
                    <h4 class="alert-heading">Aucune Salles !</h4>
                    <p>Aucune salle trouver !.</p>
                </div>
            </div>
            
            

            